"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@privy-io/routes"),t=require("./maybeCreateWalletOnLogin.js");require("../../utils/getUserEmbeddedEthereumWallet.js"),require("../../utils/getAllUserEmbeddedEthereumWallets.js"),require("../../utils/embedded-wallets.js"),require("../../utils/getUserEmbeddedSolanaWallet.js"),require("../../utils/getAllUserEmbeddedSolanaWallets.js"),require("../../utils/shouldCreateEmbeddedEthWallet.js"),require("../../utils/shouldCreateEmbeddedSolWallet.js");exports.default=class{async unlink({address:t}){await this._privyInternal.fetch(e.SiwsUnlink,{body:{address:t}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async link({message:t,signature:s,walletClientType:r,connectorType:i}){await this._privyInternal.fetch(e.SiwsLink,{body:{message:t,signature:s,walletClientType:r??null,connectorType:i??null}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async login({mode:s,message:r,signature:i,walletClientType:n,connectorType:l,opts:a}){let d=await this._privyInternal.fetch(e.SiwsAuthenticate,{body:{signature:i,message:r,walletClientType:n??null,connectorType:l??null,mode:s}});await this._privyInternal.session.updateWithTokensResponse(d);let u=await t.maybeCreateWalletOnLogin(this._embedded,d,a?.embedded);return this._privyInternal.callbacks?.setUser?.(u.user),u}async fetchNonce({address:t}){let{nonce:s}=await this._privyInternal.fetch(e.SiwsInit,{body:{address:t}});return{nonce:s}}constructor(e,t){this._privyInternal=e,this._embedded=t}};
