"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/LockClosedIcon"),o=require("@heroicons/react/24/outline/PencilSquareIcon"),t=require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),i=require("react"),s=require("styled-components"),n=require("./get-is-unified-wallet-BwdzQwn_.js"),c=require("./ModalHeader-C5O9gNUP.js"),u=require("./ScreenHeader-CgYJ5Fmg.js"),l=require("./context-BeSQM-Ma.js"),a=require("./internal-context-BJv4f_bO.js"),d=require("./index-CzmnSRoa.js"),h=require("./styles-CQnB5gHS.js"),p=require("./useActiveWallet-vlXeDPzp.js");function y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("viem"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("@privy-io/js-sdk-core"),require("tinycolor2"),require("ofetch"),require("uuid"),require("jose"),require("eventemitter3"),require("./useWallets-DMyuB5aJ.js"),require("./prepareFundingModalData-DDf6xLze.js"),require("@coinbase/wallet-sdk"),require("@privy-io/ethereum"),require("mipd"),require("react-device-detect"),require("viem/utils"),require("@privy-io/popup"),require("./paths-DizMb-lU.js"),require("./usePrivy-Bx2PKTrU.js"),require("./events-context-Di6--rDg.js"),require("@scure/base"),require("zustand"),require("@headlessui/react"),require("@walletconnect/ethereum-provider"),require("@privy-io/urls"),require("./getPublicClient-BsmZyCGX.js"),require("js-cookie"),require("./frame-Oz7volks.js"),require("@privy-io/routes"),require("x402/client"),require("@privy-io/api-base"),require("viem/accounts"),require("./use-sign-with-user-signer-Cu_6Bx7m.js"),require("./getEmbeddedConnectedWallet-6TsVZJkD.js");var v=/*#__PURE__*/y(r),q=/*#__PURE__*/y(o),j=/*#__PURE__*/y(t);let g=s.styled.div`
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
`,x={"google-drive":"Google Drive",icloud:"iCloud","user-passcode":"password",privy:"Privy","privy-v2":"Privy"},C=({onClose:r})=>/*#__PURE__*/e.jsxs(h.RecoveryExplainerContainer,{children:[/*#__PURE__*/e.jsx(u.CenteredScreenHeader,{title:"Why do I need to secure my account?",icon:/*#__PURE__*/e.jsx(j.default,{width:48}),description:/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx("p",{children:"Your app uses cryptography to secure your account. App secrets are split and encrypted so only you can access them."}),/*#__PURE__*/e.jsx("p",{children:"To use this app on new devices, secure account secrets using a password, your Google or your Apple account. It’s important you don’t lose access to the method you choose."})]})}),/*#__PURE__*/e.jsx(c.PrimaryButton,{onClick:r,children:"Select backup method"})]});const m={component:()=>{let[r,o]=i.useState(!1),{navigate:t,lastScreen:s,navigateBack:y,setModalData:j,data:m,onUserCloseViaDialogOrKeybindRef:w}=n.usePrivyModal(),{user:f}=n.usePrivyContext(),{embeddedWallets:S}=l.useAppConfig(),{closePrivyModal:k}=a.usePrivyInternal(),P=n.getPrivyPrimaryWallet(f),b=null===P,{isInAccountCreateFlow:M,isResettingPassword:A,shouldCreateEth:I,shouldCreateSol:F}=m.recoverySelection,W=P&&"privy"!==P.recoveryMethod,R=W?/*#__PURE__*/e.jsxs("span",{children:["Your account is currently secured using"," ",/*#__PURE__*/e.jsx("strong",{children:x[P?.recoveryMethod||"user-passcode"]}),"."]}):"Select a method for logging in on new devices and recovering your account.";function B(e){j({recoveryOAuthStatus:{provider:e,action:b?"create-wallet":"set-recovery",isInAccountCreateFlow:M,shouldCreateEth:I,shouldCreateSol:F}}),t("RecoveryOAuthScreen")}function O(){m?.setWalletPassword?.onFailure(Error("User exited set recovery flow")),k({shouldCallAuthOnSuccess:m?.setWalletPassword?.callAuthOnSuccessOnClose??!1})}return w.current=O,/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(c.ModalHeader,{onClose:O,backFn:r?()=>o(!1):s?y:void 0,infoFn:s||r?void 0:()=>o(!0)},"header"),r?/*#__PURE__*/e.jsx(C,{onClose:()=>o(!1)}):/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(u.CenteredScreenHeader,{title:W?"Update backup method":"Secure your account",icon:/*#__PURE__*/e.jsx(v.default,{width:48}),description:R}),/*#__PURE__*/e.jsx(h.RecoveryContainer,{children:S.userOwnedRecoveryOptions.filter((e=>!["icloud","google-drive"].includes(P?.recoveryMethod||"")||e!==P?.recoveryMethod)).sort().map((r=>{switch(r){case"google-drive":/*#__PURE__*/return e.jsxs(p.LoginMethodButton,{onClick:()=>B("google-drive"),children:[/*#__PURE__*/e.jsx(g,{children:/*#__PURE__*/e.jsx(h.GoogleDrive,{style:{width:18}})}),"Back up to Google Drive"]},r);case"icloud":/*#__PURE__*/return e.jsxs(p.LoginMethodButton,{onClick:()=>B("icloud"),children:[/*#__PURE__*/e.jsx(g,{children:/*#__PURE__*/e.jsx(h.AppleICloud,{style:{width:24}})}),"Back up to Apple iCloud"]},r);case"user-passcode":/*#__PURE__*/return e.jsxs(p.LoginMethodButton,{onClick:()=>{t(d.embeddedWalletSetPasswordScreen({isCreatingWallet:b,skipSplashScreen:!0}))},children:[/*#__PURE__*/e.jsx(g,{children:/*#__PURE__*/e.jsx(q.default,{style:{width:18}})}),A?"Reset your":"Set a"," password"]},r);default:return null}}))})]}),/*#__PURE__*/e.jsx(c.BlobbyFooter,{})]})}};exports.RecoverySelectionScreen=m,exports.default=m;
