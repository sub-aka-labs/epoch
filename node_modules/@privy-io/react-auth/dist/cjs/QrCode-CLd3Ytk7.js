"use strict";var e=require("react/jsx-runtime"),r=require("qrcode"),t=require("react"),o=require("styled-components"),l=require("./context-BeSQM-Ma.js"),i=require("./useActiveWallet-vlXeDPzp.js");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=/*#__PURE__*/n(r),a=/*#__PURE__*/n(t);const s=()=>/*#__PURE__*/e.jsx("svg",{width:"200",height:"200",viewBox:"-77 -77 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"28px",width:"28px"},children:/*#__PURE__*/e.jsx("rect",{width:"50",height:"50",fill:"black",rx:10,ry:10})});let g=(e,r,t,o,l)=>{for(let i=r;i<r+o;i++)for(let r=t;r<t+l;r++){let t=e?.[r];t&&t[i]&&(t[i]=0)}return e},x=({x:r,y:t,cellSize:o,bgColor:l,fgColor:i})=>
/*#__PURE__*/e.jsx(e.Fragment,{children:[0,1,2].map((n=>/*#__PURE__*/e.jsx("circle",{r:o*(7-2*n)/2,cx:r+7*o/2,cy:t+7*o/2,fill:n%2!=0?l:i},`finder-${r}-${t}-${n}`)))}),d=({cellSize:r,matrixSize:t,bgColor:o,fgColor:l})=>/*#__PURE__*/e.jsx(e.Fragment,{children:[[0,0],[(t-7)*r,0],[0,(t-7)*r]].map((([t,i])=>/*#__PURE__*/e.jsx(x,{x:t,y:i,cellSize:r,bgColor:o,fgColor:l},`finder-${t}-${i}`)))}),h=({matrix:r,cellSize:t,color:o})=>/*#__PURE__*/e.jsx(e.Fragment,{children:r.map(((r,l)=>r.map(((r,i)=>r?/*#__PURE__*/e.jsx("rect",{height:t-.4,width:t-.4,x:l*t+.1*t,y:i*t+.1*t,rx:.5*t,ry:.5*t,fill:o},`cell-${l}-${i}`):/*#__PURE__*/e.jsx(a.default.Fragment,{},`circle-${l}-${i}`)))))}),u=({cellSize:r,matrixSize:t,element:o,sizePercentage:l,bgColor:i})=>{if(!o)/*#__PURE__*/return e.jsx(e.Fragment,{});let n=t*(l||.14),c=Math.floor(t/2-n/2),a=Math.floor(t/2+n/2);(a-c)%2!=t%2&&(a+=1);let s=(a-c)*r,g=s-.2*s,x=c*r;/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx("rect",{x:c*r,y:c*r,width:s,height:s,fill:i}),/*#__PURE__*/e.jsx(o,{x:x+.1*s,y:x+.1*s,height:g,width:g})]})},m=r=>{let t=r.outputSize,o=((e,r)=>{let t=c.default.create(e,{errorCorrectionLevel:r}).modules,o=i.convert1dTo2dArray(Array.from(t.data),t.size);return o=g(o,0,0,7,7),o=g(o,o.length-7,0,7,7),g(o,0,o.length-7,7,7)})(r.url,r.errorCorrectionLevel),l=t/o.length,n=i.clamp(2*l,{min:.025*t,max:.036*t});/*#__PURE__*/return e.jsxs("svg",{height:r.outputSize,width:r.outputSize,viewBox:`0 0 ${r.outputSize} ${r.outputSize}`,style:{height:"100%",width:"100%",padding:`${n}px`},children:[/*#__PURE__*/e.jsx(h,{matrix:o,cellSize:l,color:r.fgColor}),/*#__PURE__*/e.jsx(d,{cellSize:l,matrixSize:o.length,fgColor:r.fgColor,bgColor:r.bgColor}),/*#__PURE__*/e.jsx(u,{cellSize:l,element:r.logo?.element,bgColor:r.bgColor,matrixSize:o.length})]})},f=o.styled.div.attrs({className:"ph-no-capture"})`
  display: flex;
  justify-content: center;
  align-items: center;
  height: ${e=>`${e.$size}px`};
  width: ${e=>`${e.$size}px`};
  margin: auto;
  background-color: ${e=>e.$bgColor};

  && {
    border-width: 2px;
    border-color: ${e=>e.$borderColor};
    border-radius: var(--privy-border-radius-md);
  }
`;exports.QrCode=r=>{let{appearance:t}=l.useAppConfig(),o=r.bgColor||"#FFFFFF",i=r.fgColor||"#000000",n=r.size||160,c="dark"===t.palette.colorScheme?o:i;/*#__PURE__*/return e.jsx(f,{$size:n,$bgColor:o,$fgColor:i,$borderColor:c,children:/*#__PURE__*/e.jsx(m,{url:r.url,logo:{element:r.squareLogoElement??s},outputSize:n,bgColor:o,fgColor:i,errorCorrectionLevel:r.errorCorrectionLevel||"Q"})})};
