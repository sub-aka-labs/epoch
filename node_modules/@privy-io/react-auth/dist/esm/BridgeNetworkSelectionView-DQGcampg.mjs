import{createPublicClient as e,http as r}from"viem";import{UsdcAddressMap as a,formatWalletAddress as o}from"@privy-io/js-sdk-core";import{a as i}from"./getPublicClient-B4uPLKn-.mjs";import{g as n}from"./getErc20Balance-DA4dGV9O.mjs";import{jsx as t,jsxs as s,Fragment as c}from"react/jsx-runtime";import{useRef as l}from"react";import{c as m,B as d}from"./ModalHeader-rCMpqA2a.mjs";import{b as h,R as p}from"./Layouts-BlFm53ED.mjs";import{t as u}from"./FundWalletMethodHeader-PIxwFzzh.mjs";import{R as f}from"./Row-C9vrS4Zi.mjs";import{E as g}from"./ErrorMessage-D8VaAP5m.mjs";import{V as b,L as y}from"./Value-tcJV9e0L.mjs";import{S as v}from"./Subtitle-CV-2yKE4.mjs";import{T as j}from"./Title-BnzYV3Is.mjs";import w from"@heroicons/react/24/outline/WalletIcon";import{styled as C}from"styled-components";import{g as k}from"./getChainName-DjpPdUSc.mjs";import{C as x}from"./Chip-D2-wZOHJ.mjs";import{N}from"./NetworkIcon-B48ilzF8.mjs";import{B as T,a as B}from"./shared-FM0rljBt.mjs";import{Menu as S,MenuButton as $,MenuItems as I,MenuItem as A}from"@headlessui/react";import E from"@heroicons/react/24/outline/ChevronDownIcon";import{f as F}from"./formatErc20TokenAmount-BuPk9xcy.mjs";import{g as P}from"./ethers-BQ45eiVv.mjs";import{F as M,a as L,b as R,c as W,d as z}from"./styles-BNn7MnP1.mjs";const H=({chains:o,appId:t,address:s,rpcConfig:c,includeUsdc:l})=>Promise.all(o.map((async o=>{let m=e({chain:o,transport:r(i(o,c,t))}),d=await m.getBalance({address:s}).catch((()=>0n)),h=null,p=a[o.id];if(l&&p){let{balance:e}=await n({address:s,chain:o,rpcConfig:c,appId:t,erc20Address:p});h=e}return{balance:d,erc20Balance:h,erc20Address:p,chain:o}}))),Q=({balance:e,className:r,chain:a})=>/*#__PURE__*/t(T,{className:r,$state:void 0,children:/*#__PURE__*/t(U,{balance:e,chain:a})}),U=({balance:e,chain:r})=>/*#__PURE__*/s(c,{children:[/*#__PURE__*/s(V,{children:[/*#__PURE__*/t(O,{chainId:"object"==typeof r?r.id:"solana"}),/*#__PURE__*/t(b,{children:"object"==typeof r?r.name:k(r)})]}),/*#__PURE__*/s(x,{isLoading:!1,isPulsing:!1,color:"gray",children:[/*#__PURE__*/t(D,{children:/*#__PURE__*/t(w,{})}),e]})]});let V=C.div`
  display: flex;
  align-items: center;
`,D=C.div`
  height: 0.75rem;
  width: 0.75rem;
  margin-right: 0.2rem;
`,O=C(N)`
  height: 1.25rem;
  width: 1.25rem;
  display: inline-block;
  margin-right: 0.5rem;
  border-radius: 4px;
`;const Y=({options:e,onSelect:r,selected:a,className:o})=>/*#__PURE__*/s(S,{as:_,children:[/*#__PURE__*/s($,{as:K,children:[/*#__PURE__*/t(U,{balance:a.balance,chain:a.chain}),/*#__PURE__*/t(J,{height:16})]}),/*#__PURE__*/t(I,{as:q,className:o,children:e.map(((e,a)=>/*#__PURE__*/t(A,{as:G,onClick:()=>r(a),children:/*#__PURE__*/t(U,{balance:e.balance,chain:e.chain})},a)))})]});let _=C.div`
  width: 100%;
  position: relative;
`,q=C.div`
  width: 100%;
  margin-top: 0.5rem;
  position: absolute;
  background-color: var(--privy-color-background);
  border-radius: var(--privy-border-radius-md);
  overflow-x: hidden;
  overflow-y: auto;
  box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
  max-height: 11.75rem;

  && {
    border: solid 1px var(--privy-color-foreground-4);
  }

  z-index: 1;
`,G=C.button`
  width: 100%;
  display: flex;
  justify-content: space-between;

  && {
    padding: 1rem;
  }

  :not(:last-child) {
    border-bottom: solid 1px var(--privy-color-foreground-4);
  }

  :hover {
    background: var(--privy-color-background-2);
  }
`,J=C(E)`
  height: 1rem;
  margin-left: 0.5rem;
`,K=C.button`
  ${B}

  /* Push the chip all the way to the right */
  span {
    margin-left: auto;
  }

  ${J} {
    transition: rotate 100ms ease-in;
  }

  &[aria-expanded='true'] {
    ${J} {
      rotate: -180deg;
    }
  }
`;const X=({displayName:e,errorMessage:r,configuredFundingChain:a,formattedBalance:i,fundingAmount:n,fundingCurrency:b,fundingAmountInUsd:w,options:C,selectedOption:x,isPreparing:N,isSubmitting:T,addressToFund:B,fundingWalletAddress:S,onSubmit:$,onSelect:I,onAmountChange:A,erc20ContractInfo:E})=>{let H=l(null);/*#__PURE__*/return s(c,{children:[/*#__PURE__*/t(u,{}),/*#__PURE__*/t(h,{}),/*#__PURE__*/t(j,{children:"Transfer from another network"}),/*#__PURE__*/s(v,{children:["You need more funds on the"," ","object"==typeof a?a.name:k(a)," ","network. Bridge from another blockchain network."]}),/*#__PURE__*/s(M,{style:{marginTop:"2rem"},children:[/*#__PURE__*/s(L,{onClick:()=>H.current?.focus(),children:[/*#__PURE__*/t(R,{ref:H,value:n,onChange:e=>{let r=e.target.value;if(/^[0-9.]*$/.test(r)&&r.split(".").length-1<=1){let e=/\.$/.test(r)?".":"",a=Number(r.replace(/\.$/,"")||"0");if(Number.isNaN(a))return void A("0");A(a.toString()+e)}}}),/*#__PURE__*/t(W,{children:b})]}),w&&/*#__PURE__*/t(z,{children:w})]}),/*#__PURE__*/s(f,{style:{marginTop:"1.5rem"},children:[/*#__PURE__*/t(y,{children:"From"}),/*#__PURE__*/t(y,{children:o(S)})]}),/*#__PURE__*/t(Y,{selected:{chain:x.chain,balance:x.isErc20Quote?F({amount:x.erc20Balance??0n,decimals:E?.decimals??6})+` ${E?.symbol||""}`:P(x.balance,x.chain.nativeCurrency.symbol,3,!0)},options:C.map((({chain:e,balance:r,isErc20Quote:a,erc20Balance:o})=>({chain:e,balance:a?F({amount:o??0n,decimals:E?.decimals??6})+` ${E?.symbol||""}`:P(r,e.nativeCurrency.symbol,3,!0)}))),onSelect:I}),/*#__PURE__*/s(f,{style:{marginTop:"1.5rem"},children:[/*#__PURE__*/t(y,{children:"To"}),/*#__PURE__*/t(y,{children:o(B)})]}),/*#__PURE__*/t(Q,{chain:a,balance:i}),/*#__PURE__*/t(g,{style:{marginTop:"1rem"},children:r}),/*#__PURE__*/s(m,{style:{marginTop:"1rem"},loading:T||N,disabled:N||T,onClick:$,children:["Confirm with ",e]}),/*#__PURE__*/t(p,{}),/*#__PURE__*/t(d,{})]})};export{X as B,H as g};
